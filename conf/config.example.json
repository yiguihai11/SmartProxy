{
  "listener": {
    "socks5_port": 1080,
    "web_port": 8080,
    "dns_port": 1053,
    "ipv6_enabled": false,
    "ipv6_only": false
  },
  "socks5": {
    "max_connections": 1000,
    "cleanup_interval": 300,
    "enable_auth": true,
    "auth_users": [
      {
        "username": "admin",
        "password": "admin123",
        "enabled": true,
        "user_groups": ["admin"],
        "rate_limit": {
          "upload_bps": 10485760,
          "download_bps": 10485760
        },
        "connection_limit": {
          "max_connections": 10,
          "expires_after_minutes": 60,
          "allow_from_ips": ["192.168.0.0/16"],
          "block_from_ips": [],
          "time_restriction": {
            "allowed_hours": ["09:00-18:00"],
            "allowed_days": ["monday", "tuesday", "wednesday", "thursday", "friday"],
            "timezone": "Asia/Shanghai",
            "effective_dates": ["2024-01-01"],
            "expired_dates": []
          }
        }
      },
      {
        "username": "user",
        "password": "user123",
        "enabled": true,
        "user_groups": ["user"],
        "rate_limit": {
          "upload_bps": 524288,
          "download_bps": 524288
        },
        "connection_limit": {
          "max_connections": 5
        }
      }
    ]
  },
  "router": {
    "chnroutes": {
      "enable": true,
      "path": "conf/chnroutes.txt"
    },
    "rules": [
      {
        "action": "allow",
        "patterns": [
          "baidu.com",
          "*.qq.com",
          ".cn",
          "114.114.114.114",
          "223.5.5.5",
          "119.29.29.29"
        ],
        "description": "中国网站直连"
      },
      {
        "action": "allow",
        "patterns": [
          "localhost",
          "127.0.0.1",
          "::1",
          "192.168.0.0/16",
          "10.0.0.0/8",
          "172.16.0.0/12"
        ],
        "description": "本地和内网地址直连"
      },
      {
        "action": "deny",
        "patterns": [
          "*.google.com",
          "*.youtube.com",
          "*.facebook.com",
          "*.twitter.com",
          "*.instagram.com",
          "*.telegram.org",
          "github.com",
          "*.githubusercontent.com"
        ],
        "description": "国外网站走代理"
      },
      {
        "action": "block",
        "patterns": [
          "*.adsystem.com",
          "*.doubleclick.net",
          "*.googleads.com",
          "ad.*"
        ],
        "description": "屏蔽广告域名"
      },
      {
        "action": "deny",
        "patterns": [
          "8888",
          "8889",
          "8890"
        ],
        "description": "HTTP代理端口走代理"
      },
      {
        "action": "proxy",
        "patterns": [
          "*.example.com"
        ],
        "proxy_node": "upstream-socks5",
        "description": "特定域名通过上游SOCKS5代理"
      }
    ],
    "proxy_nodes": [
      {
        "name": "upstream-socks5",
        "type": "socks5",
        "address": "127.0.0.1:1081",
        "enabled": true,
        "auth_method": "",
        "description": "上游SOCKS5代理服务器"
      },
      {
        "name": "us-node1",
        "type": "socks5",
        "address": "us-proxy.example.com:1080",
        "enabled": false,
        "username": "user1",
        "password": "pass1",
        "auth_method": "userpass",
        "description": "美国代理节点1"
      },
      {
        "name": "jp-node1",
        "type": "socks5",
        "address": "jp-proxy.example.com:1080",
        "enabled": false,
        "auth_method": "",
        "description": "日本代理节点1"
      }
    ]
  },
  "smart_proxy": {
    "enabled": true,
    "timeout_ms": 1500,
    "blacklist_expiry_minutes": 360,
    "probing_ports": [80, 8080, 443, 8443]
  },
  "dns": {
    "enabled": true,
    "cache": {
      "max_size": 2000,
      "default_ttl": 300,
      "cleanup_interval": 60
    },
    "groups": {
      "cn": [
        "119.29.29.29:53",
        "223.5.5.5:53",
        "114.114.114.114:53"
      ],
      "foreign": [
        "8.8.8.8:53",
        "8.8.4.4:53",
        "1.1.1.1:53",
        "1.0.0.1:53"
      ]
    },
    "hijack_rules": [
      {
        "pattern": "ad.google.com",
        "target": "0.0.0.0",
        "description": "屏蔽Google广告"
      },
      {
        "pattern": "*.googleads.com",
        "target": "0.0.0.0",
        "description": "屏蔽Google广告域名"
      },
      {
        "pattern": "doubleclick.net",
        "target": "0.0.0.0",
        "description": "屏蔽DoubleClick广告"
      },
      {
        "pattern": "*.google.cn",
        "target": "114.114.114.114",
        "description": "国内google域名使用114 DNS"
      },
      {
        "pattern": "cn.yahoo.com",
        "target": "119.29.29.29",
        "description": "中国雅虎使用DNSPod"
      },
      {
        "pattern": "pixiv.net",
        "target": "8.8.8.8",
        "description": "Pixiv使用Google DNS"
      },
      {
        "pattern": "deviantart.com",
        "target": "1.1.1.1",
        "description": "DeviantArt使用Cloudflare DNS"
      }
    ]
  },
  "nat_traversal": {
    "enabled": false,
    "mode": "auto",
    "stun_servers": [
      "stun.l.google.com:19302",
      "stun1.l.google.com:19302",
      "stun2.l.google.com:19302",
      "stun.stunprotocol.org:3478",
      "stunserver.org:3478"
    ],
    "upnp_enabled": false,
    "port_mapping_range": {
      "start": 50000,
      "end": 60000
    },
    "keepalive_interval": 30,
    "stun_timeout": 5,
    "hole_punch_count": 3,
    "hole_punch_delay": 100
  },
  "connection_settings": {
    "tcp_timeout_seconds": 60,
    "udp_timeout_seconds": 300
  },
  "logging": {
    "level": "info",
    "enable_user_logs": true,
    "enable_access_logs": true,
    "log_file": "proxy.log"
  }
}